local a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w=checkArg,"string","nil","init.lua","boot/kernel/","Lua Shell","Set Url Boot","Life Url Boot","Select Boot Priority","Select Boot Fs","","Life Boot","https://raw.githubusercontent.com/igorkll/topBiosV8/main/openOSonline.lua","https://raw.githubusercontent.com/igorkll/topBiosV8/main/topBiosV8.bin","{u='',e=true,k=true,j=true,f=false}","Settings","Top Bios V8","exit","no internet-card, urlboot is not available",component.proxy,component.list,component.invoke,true;local x,y,z,A,B,C,D,E,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,a0,a1,a2,a3,a4=t(u"eep"()),u"eep"(),computer,pcall,50,16;function a4()a1=t(u"int"()or k)a2=t(u"gp"()or k)D=u"scr"()if a2 and D then Q,R,a0=a2.setBackground,a2.setForeground,a2.setPaletteColor;a2.bind(D)a2.setDepth(1)a2.setDepth(math.min(a2.maxDepth(),4))if a2.getDepth()>3 then a0(0,E.w and 0xffffff or 0)a0(1,E.w and 0 or 0xffffff)a0(2,0x888888)X=1 end;a2.setResolution(B,C)v(D,"turnOn")end;a3=a2 and a2.address end::a5::if not pcall(function()E=load("return "..x.getData())()end)then x.setData(o)goto a5 end;function P()Y,Z=a2.getBackground()a2.setBackground(a2.getForeground())a2.setForeground(Y,Z)end;local a6,a7,a8,a9,aa,ab,ac,ad,ae,af=function()a2.fill(1,1,B,C," ")end,function(K,ag,ah)if ah then P()end;a2.set(math.floor(B/2-#K/2)+1,ag,K)if ah then P()end end,function(ai)I,H,L,J=z.pullSignal(ai)if I=="component_added"or I=="component_removed"then a4()end end,function()K="{"for aj,ak in pairs(E)do if type(ak)=="string"then K=K..aj.."='"..ak.."',"else K=K..aj.."="..tostring(ak)..","end end;A(x.setData,K.."}")end,function()a2.setDepth(1)a2.setDepth(a2.maxDepth())Q(0)R(-1)end,function(al)if X then if al==0 then Q(1,w)R(0,w)elseif al==1 then Q(1,w)R(2,w)end else Q(E.w and 0 or-1)R(E.w and-1 or 0)end end,x.getLabel(),"__fast","__bios",z.shutdown;x.setLabel(q)a4()function z.shutdown(am)if am=="bios"then A(x.setLabel,ae)elseif am=="fast"then A(x.setLabel,ad)end;af(am)end;function z.getBootUrl()if E.u==k then return end;return E.u end;function z.setBootUrl(an)a(1,an,b,c)E.u=an or k;a9()end;function z.getBootEeprom()return y end;function z.getBootGpu()return a3 end;function z.getBootScreen()return D end;function z.getBootAddress()return T or E.a end;function z.setBootAddress(ao)a(1,ao,b,c)E.a,T=ao,ao;a9()end;function z.getBootFile()return S or E.p end;function z.setBootFile(ap)a(1,ap,b,c)E.p,S=ap,ap;a9()end;local aq,ar,as,at,au,av=function(aw,ax,ay)ab(0)a6()a7(aw,2,not X)::az::ab(1)for aA,K in ipairs(ax)do a7((" "):rep(46),aA+3,aA==ay)a7(K,aA+3,aA==ay)end;a8()if I=="key_down"then if J==28 then return ay end;if J==208 and ay<#ax then ay=ay+1 end;if J==200 and ay>1 then ay=ay-1 end end;goto az end,function(aw,ai)if not a2 then return end;ab(0)a6()a7(aw,2)while ai do ab(1)a7("press enter to continue",4)a8()if I=="key_down"and J==28 then break end end end,function(aw,aB)K=aB or k::az::a6()ab(0)a7(aw,2)ab(1)a7(K.."_",4)a8()if I=="key_down"then if J==28 then return K elseif J==14 then K=K:sub(1,-2)elseif L>31 and L<127 then K=K..string.char(L)end elseif I=="clipboard"then K=K..L end;goto az end,function(aC,aD)H,K,L,M,T,S=t(aC),k,k,F,aC,aD;I,M=H.open(aD,"rb")if I then repeat K=K..L;L=H.read(I,math.huge)until not L;J,M=load(K,"="..aD)end;if M then return M end;aa()M=debug.traceback;assert(xpcall(J,M))af()end,function(an)H,K,M=a1.request(an),k,"Unvalid Address"while H do L,M=H.read(math.huge)if L then K=K..L else break end end;if M then return M end;J,M=load(K,"="..an)if M then return M end;aa()M=debug.traceback;assert(xpcall(J,M))af()end;function av()M,S,T,U,V={"none"},{},1,E.a,E.p;for ao in u"file"do table.insert(M,ao:sub(1,5)..":"..(v(ao,"getLabel")or"unknown"))S[#M]=ao;if ao==E.a then T=#M end end;G=aq(j,M,T)if S[G]then if E.a~=S[G]then E.p=F end;E.a=S[G]M,T={},1;if v(E.a,"exists",d)then M={d}end;for aj,ak in ipairs(v(E.a,"list",e)or{})do L=e..ak;table.insert(M,L)if L==E.p then T=#M end end;if#M>0 then G=aq("select file",M,T)E.p=M[G]else ar("no boot files on this fs",1)E.a,E.p=U,V;return 1 end else E.a,E.p=F,F;return 1 end end;function W(aE,aF)M=" ("..aE:sub(1,4)..", "..aF..") "ar("booting"..M)K=at(aE,aF)if K then ar("boot-error"..M..K,1)end end;function N(an)if not a1 then ar(s,1)return end;ar("url booting")K=au(an)if K then ar("error-urlboot: "..K,1)end end;function O()ar"saving"a9()end;if E.k then z.beep"."end;if a2 and ac~=ad and not E.f then ar"press ALT to open the bios menu"G=F;if ac==ae then G=1 else for aA=0,7 do a8(.1)if I=="key_down"and J==56 then G=1;break end end end;while G do G=aq(q,{i,j,l,"Internet Utiles","Shutdown","Reset",f,p,r},G)if G==1 then E.b=aq(i,{"Fs","Url"},E.b and 2 or 1)==2;O()elseif G==2 then av()G=2;O()elseif G==3 then _=av()K,M=E.a,E.p;G,E.a,E.p=3,U,V;if not _ then W(K,M)end elseif G==4 then if not a1 then ar(s,1)end;G=1;while 1 do G=aq("Internet Utiles",{g,h,"set openOSonline at urlboot","run openOSonline","run saved url",r},G)if G==1 then E.u=as(g,E.u)O()elseif G==2 then N(as(h))elseif G==3 then E.u=m;O()elseif G==4 then N(m)elseif G==5 then N(E.u)elseif G==6 then break end end;G=4 elseif G==5 then af()elseif G==6 then ar"resetting"x.setData(o)af(1)elseif G==7 then T=F;while 1 do T=as(f,T)if T==r or T==k then break end;J,M=load(T)if not J then ar(M,1)else J,M=pcall(J)if not J then ar(M,1)end end end elseif G==8 then G=1;while 1 do G=aq(p,{"beep on start: "..tostring(E.k),"allow boot auto-assignments: "..tostring(E.e),"allow set urlboot by auto-assignments: "..tostring(E.j),"theme: "..(E.w and"black"or"white"),"fastboot: "..tostring(E.f),r},G)if G==1 then E.k=not E.k elseif G==2 then E.e=not E.e elseif G==3 then E.j=not E.j elseif G==4 then E.w=not E.w elseif G==5 then E.f=not E.f elseif G==6 then O()break end end;G=8 elseif G==9 then break end end end::aG::K=E.a and E.p and t(E.a)M=E.u~=k and a1;if M and E.b then N(E.u)elseif K and E.b then W(E.a,E.p)elseif K then W(E.a,E.p)elseif M then N(E.u)end;if E.e then ar"boot auto-assignments"H=1;for aH in u"file"do if v(aH,"exists",d)then E.a=aH;E.p=d;H=F;a9()break end end;if E.u==k and a1 and H and E.j then E.u=m;H=F;a9()end else ar"no suitable boot option"end;a8(1)goto aG